"use strict";$(function(){FastClick.attach(document.body);var o=new Swiper(".swiper-container",{direction:"vertical",allowTouchMove:!1,on:{init:function(){swiperAnimateCache(this),swiperAnimate(this)},slideChangeTransitionStart:function(){swiperAnimateCache(this),swiperAnimate(this)}}}),i=function(){$(".swiper-button-next1").on("click",function(){o.slideNext()}),$(".swiper-button-next2").on("click",function(){n.obj_name=$("#obj_name").val(),n.your_name=$("#your_name").val(),""!==n.obj_id?o.slideNext():weui.alert("请选择表白对象")}),$(".swiper-button-next3").on("click",function(){""!==n.place?o.slideNext():weui.alert("请选择表白地点")}),$(".swiper-button-next4").on("click",function(){""!==n.words?(o.slideNext(),$.ajax({url:"http://www.iliangcang.com/520/prog/getsharepic.php",data:{place:n.place,words:n.words,obj_name:n.obj_name,your_name:n.your_name},success:function(o){var i=JSON.parse(o).pic_url;$(".section6 .result").attr("src",i),$(".section5").delay(2e3).fadeOut().end().find($(".sec6-wrap")).show()}})):weui.alert("请选择表白语或输入要表白的话")})},e=function(){$(".section2 .options-list li").on("click",function(){n.obj_id=$(this).data("obj_id"),n.list=n.arr[n.obj_id].list,$(".section2 .options-list li").find("i").hide(),$(this).find("i").show();var o=Handlebars.compile($("#list-tpl").html());$(".section4 .options-list").html(o(n.list))}),$(".section3 .options-list li").on("click",function(){n.place=$(this).data("place"),$(".section3 .options-list li").find("i").hide(),$(this).find("i").show()}),$(".section4 .options-list").on("click","li",function(o){$(".section4 .options-list li").find("i").hide(),""==$(".love_words").text()||"25个字以内"==$(".love_words").text()?(n.words=o.currentTarget.innerText,$(this).find("i").show()):(weui.alert("您已输入表白语请清空后再试"),n.words=$(".love_words").text())})},t=function(){$(".zdy li").on("click",function(){console.log($(this).data("obj_id")),$(".mask1").fadeIn()}),$(".custom").on("click",function(){console.log($(this).data("obj_id")),$(".mask2").fadeIn()}),$(".confirm").on("click",function(){n.obj_name=$("#obj_name").val(),n.your_name=$("#your_name").val(),n.words=$("#words").val(),$(".slot-1").text(n.obj_name),$(".slot-2").text(n.your_name),$(".love_words").text(n.words),$(".section4 .options-list li").find("i").hide(),$(".obj-mask").hide()}),$(".cancel").on("click",function(){$(".obj-mask").hide()})},n={obj_id:"",obj_name:"",your_name:"",place:"",words:"",arr:[{obj_id:0,list:[{word:0,love:"只要有你一个，就不孤独。"},{word:1,love:"你连指尖都泛出好看的颜色。"},{word:2,love:"我喜欢你，像喜欢春天的熊。"},{word:3,love:"和我一起慢慢变老吧，最好的日子还在后头。"},{word:4,love:"我是无数个我奔跑成一个我去睡你。"},{word:5,love:"一想起你，我这张丑脸上就泛起微笑。"}]},{obj_id:1,list:[{word:0,love:"咱们应当在一起，否则就太伤天害理啦。"},{word:1,love:"静下来想你，觉得一切都美好得不可思议。"},{word:2,love:"以后我就成了她打盹的枕头。"},{word:3,love:"或许从没有爱过他，只是爱上了童话。"},{word:4,love:"你还不来，我怎敢老去。"},{word:5,love:"美人儿，我们去看看那玫瑰花。"}]},{obj_id:2,list:[{word:0,love:"开心的一个家，是提早步入的天堂。"},{word:1,love:"家人不是一件“重要的事”，而是一切。"},{word:2,love:"上帝没法无处不在，于是创造了母亲。"},{word:3,love:"我的妈妈是行走的奇迹。"},{word:4,love:"有一位英雄，我管叫他爸爸。"},{word:5,love:"一个父亲，胜过100个老师。"}]},{obj_id:3,list:[{word:0,love:"和猫相处的时间，从来不是浪费。"},{word:1,love:"越是了解人类，我就越喜欢狗。"},{word:2,love:"我原本超喜欢狗，直到我发现了猫。"},{word:3,love:"有些天使选择了毛，而不是翅膀。"},{word:4,love:"狗子是我最喜欢的人类。"},{word:5,love:"我的终生职业是铲屎官。"}]},{obj_id:4,list:[{word:0,love:"我自己太有意思，无需他人陪伴。"},{word:1,love:"我不完美，但我是限量款。"},{word:2,love:"我不是喜欢自己，是为自己疯狂。"},{word:3,love:"对我来说，我是世界上最大的谜。"},{word:4,love:"当我需要专家指导，我和自己说话。"},{word:5,love:"管他的，我只和自己约会。"}]},{obj_id:5,list:[{word:0,love:"永远年轻，永远热泪盈眶。"},{word:1,love:"做一个世界的水手，游遍每一个港口。"},{word:2,love:"幸福的时光即虚度的年华。"},{word:3,love:"生活给你准备的第二次机会，叫做明天。"},{word:4,love:"安静地工作，让成功发声。"},{word:5,love:"甜筒最好吃的是底端尖尖的部分。"}]}],list:[],talk:"",init:($.ajax({url:"http://www.iliangcang.com/520/prog/getshareparam.php?url="+encodeURIComponent(location.href.split("#").toString()),success:function(o){var i=JSON.parse(o);wx.config({debug:!1,appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage"]}),wx.ready(function(){wx.onMenuShareTimeline({title:"520，你该表白了",link:"http://www.iliangcang.com/520/index.html",imgUrl:"http://imgs-qn.iliangcang.com/ware/sowhatimg/ware/orig/2/30/30250.jpeg",trigger:function(o){},success:function(o){},cancel:function(o){},fail:function(o){alert(JSON.stringify(o))}}),wx.onMenuShareAppMessage({title:"520，你该表白了",desc:"520，你准备好给谁表白了吗？",link:"http://www.iliangcang.com/520/index.html",imgUrl:"http://imgs-qn.iliangcang.com/ware/sowhatimg/ware/orig/2/30/30250.jpeg",type:"",dataUrl:"",success:function(){alert("ok")},cancel:function(){alert("已取消")}})})}}),i(),e(),void t())}});